(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{228:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(586),a=n(12),o=n.n(a),i=n(1),u=n.n(i),c=n(229),l=u.a.memo(function(e){return u.a.createElement(r.a,Object.assign({},e,{className:o()(c.ph,e.className)}))})},229:function(e,t,n){e.exports={ph:"page-header_ph__1jMB9"}},298:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return v}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return h}),n.d(t,"e",function(){return b});var r=n(233),a=n(234),o=n.n(a);function i(){var e=Object(r.a)(['\n    mutation runScriptMutation(\n        $projectId: String!\n        $id: String!\n        $input: ExecutionInput!\n    ) {\n        output(projectId: $projectId, id: $id, input: $input)\n            @rest(method: "POST", path: "/projects/{args.projectId}/exec") {\n            jobId\n        }\n    }\n']);return i=function(){return e},e}function u(){var e=Object(r.a)(['\n    mutation deleteScriptMutation($projectId: String!, $id: String!) {\n        output(projectId: $projectId, id: $id)\n            @rest(\n                method: "DELETE"\n                path: "/projects/{args.projectId}/scripts/{args.id}"\n            ) {\n            id\n            rev\n        }\n    }\n']);return u=function(){return e},e}function c(){var e=Object(r.a)(['\n    mutation updateScriptMutation(\n        $projectId: String!\n        $id: String!\n        $input: Script!\n    ) {\n        output(projectId: $projectId, id: $id, input: $input)\n            @rest(\n                method: "PUT"\n                path: "projects/{args.projectId}/scripts/{args.id}"\n            ) {\n            id\n            rev\n        }\n    }\n']);return c=function(){return e},e}function l(){var e=Object(r.a)(['\n    mutation createScriptMutation($projectId: String!, $input: Script!) {\n        output(projectId: $projectId, input: $input)\n            @rest(method: "POST", path: "projects/{args.projectId}/scripts") {\n            id\n            rev\n        }\n    }\n']);return l=function(){return e},e}function s(){var e=Object(r.a)(['\n    query findScriptsQuery($projectId: String!, $id: String!) {\n        output(projectId: $projectId, id: $id)\n            @rest(\n                type: "Script"\n                path: "/projects/{args.projectId}/scripts/{args.id}"\n            ) {\n            id\n            rev\n            createdAt\n            name\n            description\n            execution\n            persistence\n        }\n    }\n']);return s=function(){return e},e}function f(){var e=Object(r.a)(['\n    query findScripts($projectId: String!, $query: Query) {\n        output(projectId: $projectId, query: $query)\n            @rest(\n                type: "[Script]"\n                path: "/projects/{args.projectId}/scripts?{args.query}"\n            ) {\n            paging\n            data\n        }\n    }\n']);return f=function(){return e},e}var p=o()(f()),d=o()(s()),v=o()(l()),m=o()(c()),h=o()(u()),b=o()(i())},355:function(e,t,n){var r=n(323),a=n(136),o=n(101);e.exports=function(e){return o(e)?r(e):a(e)}},356:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(590),a=n(12),o=n.n(a),i=n(1),u=n.n(i),c=n(357),l=u.a.memo(function(e){var t=e.children,n=e.className;return u.a.createElement(r.a,{className:o()(c.card,n)},t)})},357:function(e,t,n){e.exports={card:"card_card__3zxNn"}},395:function(e,t,n){var r=n(556),a=n(28);e.exports=function e(t,n,o,i,u){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,o,i,e,u))}},396:function(e,t,n){var r=n(557),a=n(560),o=n(561),i=1,u=2;e.exports=function(e,t,n,c,l,s){var f=n&i,p=e.length,d=t.length;if(p!=d&&!(f&&d>p))return!1;var v=s.get(e);if(v&&s.get(t))return v==t;var m=-1,h=!0,b=n&u?new r:void 0;for(s.set(e,t),s.set(t,e);++m<p;){var j=e[m],_=t[m];if(c)var g=f?c(_,j,m,t,e,s):c(j,_,m,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(b){if(!a(t,function(e,t){if(!o(b,t)&&(j===e||l(j,e,n,c,s)))return b.push(t)})){h=!1;break}}else if(j!==_&&!l(j,_,n,c,s)){h=!1;break}}return s.delete(e),s.delete(t),h}},397:function(e,t,n){var r=n(23);e.exports=function(e){return e===e&&!r(e)}},398:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},547:function(e,t,n){var r=n(548),a=n(549),o=n(553),i=n(27),u=n(327);e.exports=function(e,t,n){var c=i(e)?r:a;return n&&u(e,t,n)&&(t=void 0),c(e,o(t,3))}},548:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},549:function(e,t,n){var r=n(550);e.exports=function(e,t){var n=!0;return r(e,function(e,r,a){return n=!!t(e,r,a)}),n}},550:function(e,t,n){var r=n(551),a=n(552)(r);e.exports=a},551:function(e,t,n){var r=n(311),a=n(355);e.exports=function(e,t){return e&&r(e,t,a)}},552:function(e,t,n){var r=n(101);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var o=n.length,i=t?o:-1,u=Object(n);(t?i--:++i<o)&&!1!==a(u[i],i,u););return n}}},553:function(e,t,n){var r=n(554),a=n(573),o=n(242),i=n(27),u=n(576);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):u(e)}},554:function(e,t,n){var r=n(555),a=n(572),o=n(398);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},555:function(e,t,n){var r=n(280),a=n(395),o=1,i=2;e.exports=function(e,t,n,u){var c=n.length,l=c,s=!u;if(null==e)return!l;for(e=Object(e);c--;){var f=n[c];if(s&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++c<l;){var p=(f=n[c])[0],d=e[p],v=f[1];if(s&&f[2]){if(void 0===d&&!(p in e))return!1}else{var m=new r;if(u)var h=u(d,v,p,e,t,m);if(!(void 0===h?a(v,d,o|i,u,m):h))return!1}}return!0}},556:function(e,t,n){var r=n(280),a=n(396),o=n(562),i=n(565),u=n(138),c=n(27),l=n(108),s=n(109),f=1,p="[object Arguments]",d="[object Array]",v="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,h,b,j){var _=c(e),g=c(t),y=_?d:u(e),E=g?d:u(t),x=(y=y==p?v:y)==v,O=(E=E==p?v:E)==v,I=y==E;if(I&&l(e)){if(!l(t))return!1;_=!0,x=!1}if(I&&!x)return j||(j=new r),_||s(e)?a(e,t,n,h,b,j):o(e,t,y,n,h,b,j);if(!(n&f)){var k=x&&m.call(e,"__wrapped__"),w=O&&m.call(t,"__wrapped__");if(k||w){var S=k?e.value():e,$=w?t.value():t;return j||(j=new r),b(S,$,n,h,j)}}return!!I&&(j||(j=new r),i(e,t,n,h,b,j))}},557:function(e,t,n){var r=n(127),a=n(558),o=n(559);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},558:function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},559:function(e,t){e.exports=function(e){return this.__data__.has(e)}},560:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},561:function(e,t){e.exports=function(e,t){return e.has(t)}},562:function(e,t,n){var r=n(44),a=n(316),o=n(62),i=n(396),u=n(563),c=n(564),l=1,s=2,f="[object Boolean]",p="[object Date]",d="[object Error]",v="[object Map]",m="[object Number]",h="[object RegExp]",b="[object Set]",j="[object String]",_="[object Symbol]",g="[object ArrayBuffer]",y="[object DataView]",E=r?r.prototype:void 0,x=E?E.valueOf:void 0;e.exports=function(e,t,n,r,E,O,I){switch(n){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!O(new a(e),new a(t)));case f:case p:case m:return o(+e,+t);case d:return e.name==t.name&&e.message==t.message;case h:case j:return e==t+"";case v:var k=u;case b:var w=r&l;if(k||(k=c),e.size!=t.size&&!w)return!1;var S=I.get(e);if(S)return S==t;r|=s,I.set(e,t);var $=i(k(e),k(t),r,E,O,I);return I.delete(e),$;case _:if(x)return x.call(e)==x.call(t)}return!1}},563:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},564:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},565:function(e,t,n){var r=n(566),a=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,u,c){var l=n&a,s=r(e),f=s.length;if(f!=r(t).length&&!l)return!1;for(var p=f;p--;){var d=s[p];if(!(l?d in t:o.call(t,d)))return!1}var v=c.get(e);if(v&&c.get(t))return v==t;var m=!0;c.set(e,t),c.set(t,e);for(var h=l;++p<f;){var b=e[d=s[p]],j=t[d];if(i)var _=l?i(j,b,d,t,e,c):i(b,j,d,e,t,c);if(!(void 0===_?b===j||u(b,j,n,i,c):_)){m=!1;break}h||(h="constructor"==d)}if(m&&!h){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(m=!1)}return c.delete(e),c.delete(t),m}},566:function(e,t,n){var r=n(567),a=n(569),o=n(355);e.exports=function(e){return r(e,o,a)}},567:function(e,t,n){var r=n(568),a=n(27);e.exports=function(e,t,n){var o=t(e);return a(e)?o:r(o,n(e))}},568:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},569:function(e,t,n){var r=n(570),a=n(571),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,u=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return o.call(e,t)}))}:a;e.exports=u},570:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}},571:function(e,t){e.exports=function(){return[]}},572:function(e,t,n){var r=n(397),a=n(355);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},573:function(e,t,n){var r=n(395),a=n(41),o=n(574),i=n(126),u=n(397),c=n(398),l=n(66),s=1,f=2;e.exports=function(e,t){return i(e)&&u(t)?c(l(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):r(t,i,s|f)}}},574:function(e,t,n){var r=n(575),a=n(368);e.exports=function(e,t){return null!=e&&a(e,t,r)}},575:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},576:function(e,t,n){var r=n(577),a=n(578),o=n(126),i=n(66);e.exports=function(e){return o(e)?r(i(e)):a(e)}},577:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},578:function(e,t,n){var r=n(135);e.exports=function(e){return function(t){return r(t,e)}}},579:function(e,t,n){e.exports={button:"panel_button__1fWh9"}},582:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(13),o=n(17),i=n(16),u=n(18),c=n(592),l=n(490),s=n(491),f=n(591),p=n(244),d=n(41),v=n.n(d),m=n(1),h=n.n(m),b=n(298),j=c.a.TextArea;function _(e){var t=e.form,n=e.value,r=void 0===n?"":n;return h.a.createElement(f.a.Item,{label:"Description"},t.getFieldDecorator("description",{initialValue:r,rules:[{min:10}]})(h.a.createElement(j,{rows:3})))}function g(e){var t=e.form,n=e.value,r=void 0===n?"":n,a=e.type,o=void 0===a?"":a;return h.a.createElement(f.a.Item,{label:"Name"},t.getFieldDecorator("name",{initialValue:r,rules:[{required:!0,message:"Please input ".concat(o," name!")},{min:3}]})(h.a.createElement(c.a,null)))}var y=n(30),E=n(26),x=n(118),O=n(593),I=n(71),k=n.n(I),w=n(63),S=n(547),$=n.n(S),C=n(320),F=n.n(C);var q=n(60);function N(e,t,n,r,a,o){if(null!=r.id){var i=a.readQuery({query:t,variables:n})[e],u=o.data?o.data.output:{},c=Object(y.a)({},i,u,r);a.writeQuery({query:t,data:Object(q.a)({},e,c)})}}var P=n(356),B=n(238),D=n(228),M=n(579),A=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.onBack;return h.a.createElement(D.a,{title:t,onBack:n,extra:this.__renderButtons()})}},{key:"__renderButtons",value:function(){var e=this.props,t=e.onCancel,n=e.onSave,r=e.onDelete,a=e.touched,o=e.valid,i=[];return"function"===typeof t&&i.push(h.a.createElement(B.a,{key:"cancel",className:M.button,icon:"close",disabled:!a,onClick:t},"Cancel")),"function"===typeof n&&i.push(h.a.createElement(B.a,{key:"save",type:"primary",className:M.button,icon:"save",disabled:!a||!o,onClick:n},"Save")),"function"===typeof r&&i.push(h.a.createElement(B.a,{key:"delete",type:"danger",className:M.button,icon:"delete",onClick:r},"Delete")),i}}]),t}(h.a.PureComponent),V=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).__renderForm=n.__renderForm.bind(Object(E.a)(n)),n.__handleCompletedMutation=n.__handleCompletedMutation.bind(Object(E.a)(n)),n.__handleError=n.__handleError.bind(Object(E.a)(n)),n.__updateCache=n.__updateCache.bind(Object(E.a)(n)),n}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.projectId,a=t.fetch,o=t.create,i=t.update,u=k()(n)||"new"===n?o:i,c={id:n,projectId:r};return h.a.createElement(w.c,{query:a,variables:c,skip:this.__isNew(),onError:this.__handleError},function(t){return h.a.createElement(w.b,{mutation:u,variables:c,update:e.__updateCache,onCompleted:e.__handleCompletedMutation,onError:e.__handleError},function(n,r){return e.__renderForm(t,n,r)})})}},{key:"__renderForm",value:function(e,t,n){var r,a=this,o=this.props,i=o.id,u=o.projectId,c=o.form,l=o.children,s=o.title,p=o.onBack,d=o.onDelete,v=o.delete,b=e.loading||n.loading,j=e.data?e.data.output:void 0,_=e.error||n.error,g=c.isFieldsTouched(),E=function e(t){return null!=t&&$()(t,function(t){return null==t||!!F()(t)&&e(t)})}(c.getFieldsError()),O="string"===typeof s?s:s(j,b,_),I=function(){a.props.form.validateFieldsAndScroll(function(e,n){e||t({variables:{id:i,projectId:u,input:Object(y.a)({},n,{id:i})}})})},k=function(){a.props.form.resetFields()};this.__isNew()||null==v||(r=function(){n.client.mutate({mutation:v,variables:{id:i,projectId:u}}).then(function(e){"function"===typeof d&&d()}).catch(a.__handleError)});var w=l({form:c,touched:g,valid:E,loading:b,value:j}),S=w;return null!=w&&null!=w.type&&(S=w.type===m.Fragment?w.props.children:l),h.a.createElement(x.a,{spinning:b},h.a.createElement(f.a,null,h.a.Children.map(S,function(e,t){var n=t.toFixed();return 0===t?h.a.createElement(P.a,{key:n},h.a.createElement(A,{title:O,touched:g,valid:E,onBack:p,onSave:I,onCancel:k,onDelete:r}),e):h.a.createElement(P.a,{key:n},e)})))}},{key:"__isNew",value:function(){var e=this.props.id;return k()(e)||"new"===e}},{key:"__handleCompletedMutation",value:function(e){var t=this.props,n=t.form,r=t.onCreate;n.resetFields(),this.__isNew()&&"function"===typeof r&&r(e.output.id)}},{key:"__handleError",value:function(e){O.a.error({message:e.message})}},{key:"__updateCache",value:function(e,t){var n=this.props,r=n.projectId;N("output",n.fetch,{id:t.data?t.data.output.id:this.props.id,projectId:r},this.__getFormValues(),e,t)}},{key:"__getFormValues",value:function(){var e=this.props.id,t=this.props.form.getFieldsValue();return Object(y.a)({},t,{id:e})}}]),t}(h.a.Component),T=f.a.create({name:"form_container "})(V),L=n(57);n.d(t,"default",function(){return Q});var z=c.a.TextArea,Q=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props.projectId,n=this.getParam("id"),r=function(){e.navigate(e.slicePathBack(1))};return h.a.createElement(T,{id:n,projectId:t,title:function(e){return e?e.name:""},fetch:b.d,create:b.a,update:b.f,delete:b.b,onCreate:function(t){var n=e.slicePathBack(1);e.navigate("".concat(n,"/").concat(t))},onDelete:r,onBack:r},function(e){var t=e.form,n=e.value,r=void 0===n?{}:n,a=t.getFieldDecorator;return h.a.createElement(m.Fragment,null,h.a.createElement(l.a,{gutter:16},h.a.createElement(s.a,{lg:12},h.a.createElement("fieldset",null,h.a.createElement("legend",null,"General"),h.a.createElement(g,{form:t,value:r.name}),h.a.createElement(_,{form:t,value:r.description}))),h.a.createElement(s.a,{lg:12},h.a.createElement("fieldset",null,h.a.createElement("legend",null,"Persistence"),h.a.createElement(f.a.Item,null,a("persistence.enabled",{valuePropName:"checked",initialValue:v()(r,"persistence.enabled",!1)})(h.a.createElement(p.a,null,"Enable")))))),h.a.createElement(l.a,null,h.a.createElement(s.a,{lg:24},h.a.createElement("fieldset",null,h.a.createElement("legend",null,"Execution"),h.a.createElement(f.a.Item,{label:"Query"},a("execution.query",{initialValue:v()(r,"execution.query",""),rules:[{required:!0,message:"Input script query"},{min:8}]})(h.a.createElement(z,{rows:10,minLength:8,required:!0})))))))})}}]),t}(L.a)}}]);
//# sourceMappingURL=12.46f2ce40.chunk.js.map